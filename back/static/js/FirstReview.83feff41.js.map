{"version":3,"sources":["webpack:///./src/components/page/competition_about/FirstReview.vue?78b7","webpack:///src/components/page/competition_about/FirstReview.vue","webpack:///./src/components/page/competition_about/FirstReview.vue?36c9","webpack:///./src/components/page/competition_about/FirstReview.vue","webpack:///./src/components/page/competition_about/FirstReview.vue?4d07"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","ref","on","handleSelected","model","value","callback","$$v","selectedCompetitionId","expression","_l","item","key","competitionId","competitionName","staticStyle","handleRefresh","displayManuscriptList","scopedSlots","_u","fn","scope","_s","row","manuscriptContent","score","_e","$event","handleReview","$index","currentPage","pageSize","total","handlePageChange","handlePagePrev","handlePageNext","dialogFormVisible","manuscriptData","$set","reviewData","rules","slot","handleCancel","handleConfirm","staticRenderFns","competitionList","sortByTime","res","$message","console","log","manuscriptList","length","changePageContent","component"],"mappings":"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","file":"static/js/FirstReview.83feff41.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-lx-cascades\"}),_vm._v(\" 一审投稿 \")])],1)],1),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"handle-box\"},[_vm._v(\"\\n            请先选择比赛: \\n            \"),_c('el-select',{ref:\"select\",attrs:{\"placeholder\":\"请选择比赛\"},on:{\"change\":_vm.handleSelected},model:{value:(_vm.selectedCompetitionId),callback:function ($$v) {_vm.selectedCompetitionId=$$v},expression:\"selectedCompetitionId\"}},_vm._l((_vm.competitionList),function(item){return _c('el-option',{key:item.competitionId,attrs:{\"label\":item.competitionName,\"value\":item.competitionId}})}),1),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.handleRefresh}},[_vm._v(\"刷新\")])],1),_c('el-table',{ref:\"multipleTable\",staticClass:\"table\",attrs:{\"data\":_vm.displayManuscriptList,\"border\":\"\",\"header-cell-class-name\":\"table-header\"}},[_c('el-table-column',{attrs:{\"label\":\"投稿内容\",\"min-width\":\"500\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"limit_wrap\"},[_vm._v(_vm._s(scope.row.manuscriptContent))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptCreateTime\",\"width\":\"160\",\"label\":\"投稿时间\",\"align\":\"center\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"一审分数\",\"align\":\"center\",\"min-width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.score != -1)?_c('div',[_vm._v(_vm._s(scope.row.score))]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"一审评语\",\"align\":\"center\",\"prop\":\"comment\",\"min-width\":\"250\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"100\",\"align\":\"center\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.score == -1)?_c('el-button',{staticClass:\"blue\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.handleReview(scope.$index, scope.row)}}},[_vm._v(\"作品评审\")]):_c('el-button',{staticClass:\"blue\",attrs:{\"disabled\":\"\",\"type\":\"text\",\"icon\":\"el-icon-edit\"}},[_vm._v(\"已评审\")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"current-change\":_vm.handlePageChange,\"prev-click\":_vm.handlePagePrev,\"next-click\":_vm.handlePageNext}})],1)],1),_c('el-dialog',{ref:\"dialog\",attrs:{\"title\":\"作品评审\",\"visible\":_vm.dialogFormVisible,\"showClose\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('div',{staticStyle:{\"display\":\"flex\",\"align-content\":\"space-around\"}},[_c('div',{staticClass:\"manuscript-content-box\"},[_c('el-form',{attrs:{\"model\":_vm.manuscriptData}},[_c('el-form-item',{attrs:{\"label\":\"作品内容\"}},[_c('el-input',{attrs:{\"readonly\":\"\",\"type\":\"textarea\",\"rows\":\"10\"},model:{value:(_vm.manuscriptData.manuscriptContent),callback:function ($$v) {_vm.$set(_vm.manuscriptData, \"manuscriptContent\", $$v)},expression:\"manuscriptData.manuscriptContent\"}})],1)],1)],1),_c('div',{staticClass:\"review-box\"},[_c('el-form',{ref:\"review\",attrs:{\"model\":_vm.reviewData,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"评分\",\"prop\":\"score\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入评分\"},model:{value:(_vm.reviewData.score),callback:function ($$v) {_vm.$set(_vm.reviewData, \"score\", $$v)},expression:\"reviewData.score\"}})],1),_c('el-form-item',{attrs:{\"label\":\"评语\",\"prop\":\"comment\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":\"5\",\"placeholder\":\"请输入评论\"},model:{value:(_vm.reviewData.comment),callback:function ($$v) {_vm.$set(_vm.reviewData, \"comment\", $$v)},expression:\"reviewData.comment\"}})],1)],1)],1)]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleCancel}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleConfirm}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item> <i class=\"el-icon-lx-cascades\"></i> 一审投稿 </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"handle-box\">\n                请先选择比赛:&nbsp;\n                <el-select ref=\"select\" v-model=\"selectedCompetitionId\" placeholder=\"请选择比赛\" @change=\"handleSelected\">\n                    <el-option\n                        v-for=\"item in competitionList\"\n                        :key=\"item.competitionId\"\n                        :label=\"item.competitionName\"\n                        :value=\"item.competitionId\"\n                    >\n                    </el-option>\n                </el-select>\n                <!-- <el-button style=\"margin-left: 10px\" type=\"primary\" icon=\"el-icon-refresh\" @click=\"handleReset\">重置</el-button> -->\n                <el-button style=\"margin-left: 10px\" type=\"primary\" icon=\"el-icon-refresh\" @click=\"handleRefresh\">刷新</el-button>\n            </div>\n\n            <el-table :data=\"displayManuscriptList\" border class=\"table\" ref=\"multipleTable\" header-cell-class-name=\"table-header\">\n                <el-table-column label='投稿内容' min-width=\"500\" align='center'>\n                    <template slot-scope='scope'>\n                        <div class='limit_wrap'>{{scope.row.manuscriptContent}}</div>    \n                    </template> \n                </el-table-column>\n                <el-table-column prop=\"manuscriptCreateTime\" width=\"160\" label=\"投稿时间\" align='center' sortable></el-table-column>\n                <el-table-column label=\"一审分数\" align=\"center\" min-width=\"100\"> \n                    <template slot-scope=\"scope\">\n                        <div v-if='scope.row.score != -1'>{{scope.row.score}}</div>\n                    </template>\n                </el-table-column>\n                <el-table-column label=\"一审评语\" align=\"center\" prop=\"comment\" min-width=\"250\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"100\" align=\"center\" fixed=\"right\">\n                    <template slot-scope=\"scope\">\n                        <el-button v-if='scope.row.score == -1' type=\"text\" icon=\"el-icon-edit\" class=\"blue\" @click=\"handleReview(scope.$index, scope.row)\"\n                            >作品评审</el-button\n                        >\n                        <el-button v-else disabled type=\"text\" icon=\"el-icon-edit\" class=\"blue\"\n                            >已评审</el-button\n                        >\n                    </template>\n                </el-table-column>\n            </el-table>\n\n            <div class=\"pagination\">\n                <el-pagination\n                    background\n                    layout=\"total, prev, pager, next\"\n                    :current-page=\"currentPage\"\n                    :page-size=\"pageSize\"\n                    :total=\"total\"\n                    @current-change=\"handlePageChange\"\n                    @prev-click=\"handlePagePrev\"\n                    @next-click=\"handlePageNext\"\n                ></el-pagination>\n            </div>\n        </div>\n\n        <el-dialog title=\"作品评审\" :visible.sync=\"dialogFormVisible\" :showClose=\"false\" :close-on-click-modal=\"false\" ref=\"dialog\">\n            <div style=\"display:flex; align-content: space-around;\" >\n                <div class='manuscript-content-box'>\n                    <el-form :model=\"manuscriptData\" >\n                        <el-form-item label=\"作品内容\" >\n                            <el-input readonly type=\"textarea\" rows='10' v-model=\"manuscriptData.manuscriptContent\"></el-input>\n                        </el-form-item>\n                    </el-form>\n                </div>\n                <div class='review-box'>\n                    <el-form :model=\"reviewData\" :rules=\"rules\" ref='review'> \n                        <el-form-item label=\"评分\" prop=\"score\">\n                            <el-input type=\"text\" v-model=\"reviewData.score\" placeholder=\"请输入评分\"></el-input>\n                        </el-form-item>\n                        <el-form-item label=\"评语\" prop=\"comment\">\n                            <el-input type=\"textarea\" rows='5' v-model=\"reviewData.comment\" placeholder=\"请输入评论\"></el-input>\n                        </el-form-item>\n                    </el-form>\n                </div>\n            </div>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"handleCancel\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"handleConfirm\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport utils from '../../../utils/utils';\nexport default {\n    name: 'FirstReview',\n    data() {\n        var checkScore = (rule, value, callback) => {\n            if(!value) {\n                return callback(new Error('请输入评审分数'));\n            } else if(value < 0 || value > 100) {\n                return callback(new Error('分数应该在0~100'))\n            } else {\n                callback();\n            }\n\n        }\n        return {\n            //选择的比赛的id\n            selectedCompetitionId: null,\n\n            //控制弹出框\n            dialogFormVisible: false,\n\n            //比赛列表\n            competitionList: [],\n\n            //分页\n            currentPage: 1,\n            total: 0,\n            pageSize: 10,\n            \n\n            //获取的投稿列表\n            manuscriptList: [],\n\n            //筛选出的投稿列表\n            displayManuscriptList: [],\n\n            //选择评审的投稿\n            manuscriptData: {},\n\n            //对投稿的评审信息\n            reviewData: {\n                reviewerId: '',\n                manuscriptId: '',\n                score: '',\n                comment: ''\n            },\n\n            //表单验证规则\n            rules:{\n                score: [\n                    {required: true, message:'请输入评审分数', trigger: 'blur'},\n                    {validator: checkScore, trigger: 'blur'}\n                ],\n                comment:[\n                    {required: true, message:'请输入评论', trigger: 'blur'}\n                ]\n            }\n        };\n    },\n    activated() {\n        this.getAllCompetition();\n    },\n    methods: {\n        //根据创建时间排序\n        sortByTime(array){\n            return array.sort(function(a, b) {\n                var time1 = new Date(a.createTime).getTime();\n                var time2 = new Date(b.createtime).getTime();\n                return time1 > time2 ? -1 : time1 < time2 ? 1 : 0;\n            })\n        },\n        async getAllCompetition() {\n            try {\n                let res = await this.$api.competition.getAllCompetition();\n                this.competitionList = this.sortByTime(res.competitionList);\n            } catch (error) {\n                this.$message({\n                    message: '获取比赛列表失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        async getFirstReviewManuscript() {\n            let params = {\n                adminId: utils.getSessionInfo('adminId'),\n                competitionId: this.selectedCompetitionId\n            };\n            try {\n                let res = await this.$api.competition.getManuscriptFirst(params);\n                this.manuscriptList = res.manuscriptList;\n                this.total = this.manuscriptList.length;\n                this.changePageContent();\n                // console.log(this.manuscriptList);\n            } catch (error) {\n                this.$message({\n                    message: '获取投稿失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        // 分页管理\n        handlePageChange(val) {\n            this.currentPage = val;\n            this.changePageContent();\n        },\n\n        handlePagePrev() {\n            this.currentPage--;\n        },\n\n        handlePageNext() {\n            this.currentPage++;   \n        },\n\n        //根据currentPage显示内容\n        changePageContent() {\n            this.displayManuscriptList = this.manuscriptList.slice(\n                (this.currentPage - 1) * this.pageSize,\n                (this.currentPage ) * this.pageSize >= this.manuscriptList.length\n                    ? this.manuscriptList.length\n                    : (this.currentPage ) * this.pageSize\n            );\n        },\n\n        //点击之后评审\n        handleReview(index, row) {\n            this.manuscriptData = JSON.parse(JSON.stringify(row));\n            this.dialogFormVisible = true;\n            // console.log(this.reviewData);\n        },\n\n        //dialog中的取消，应该提醒用户\n        handleCancel() {\n            this.$confirm('取消将不保存已填写的内容，是否继续?', '提示', {\n                confirmButttonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                this.dialogFormVisible = false;\n                this.$message({\n                    message: '操作已取消',\n                    duration: 1500,\n                    type: 'info'\n                });\n                this.reviewData = {\n                    reviewerId: '',\n                    manuscriptId: '',\n                    score: '',\n                    comment: ''\n                };\n            }).catch(() => {\n\n            });\n        },\n\n        //筛选\n        handleSelected() {\n            this.currentPage = 1;\n            this.getFirstReviewManuscript();\n            // let _this = this;\n            // this.selectedManuscript = this.manuscriptList.filter(this.selectFilter(_this));\n        },\n        /*\n        selectFilter(_this) {\n            let selectedCompetitionId = _this.selectedCompetitionId;\n            console.log(selectedCompetitionId);\n            return (manuscript) => {\n                return manuscript.competitionId === selectedCompetitionId;\n            };\n        },\n        */\n\n        //处理重置\n        // handleReset() {\n        //     this.displayManuscriptList = this.manuscriptList.slice(0,10);\n        //     this.currentPage = 1;\n        //     this.total = this.selectedManuscript.length;\n        // },\n\n        //处理刷新\n        handleRefresh() {\n            let messageObject = this.$message('刷新中');\n            this.currentPage = 1;\n            this.getFirstReviewManuscript();\n            messageObject.close();\n        },\n\n        handleConfirm() {\n            this.$refs['review'].validate(async (valid) => {\n                if(valid) {\n                    this.dialogFormVisible = false;\n                    this.reviewData.reviewerId = utils.getSessionInfo('adminId');\n                    this.reviewData.manuscriptId = this.manuscriptData.manuscriptId;\n                    let reviewData = this.reviewData;\n                    try {  \n                        await this.$api.competition.uploadReviewDataFirst(reviewData);\n                        this.$message({\n                            message: '评审成功',\n                            duration: 2000,\n                            type: 'success'\n                        });\n                        for(let i = 0; i < this.displayManuscriptList.length; i ++){\n                            if(this.displayManuscriptList[i].manuscriptId === this.reviewData.manuscriptId) {\n                                this.displayManuscriptList[i].score = this.reviewData.score;\n                                this.displayManuscriptList[i].comment = this.reviewData.comment;\n                                // console.log(\"this.displayManuscriptList[i].manuscriptScore\"+this.displayManuscriptList[i].manuscriptScore)\n                                // console.log(\"score:\"+this.reviewData.score)\n                            }\n                        }\n                        for(let i = 0; i < this.manuscriptList.length; i ++){\n                            if(this.manuscriptList[i].manuscriptId === this.reviewData.manuscriptId) {\n                                this.manuscriptList[i].score = this.reviewData.score;\n                                this.manuscriptList[i].comment = this.reviewData.comment;\n                            }\n                        }\n                        this.reviewData = {\n                            reviewerId: '',\n                            manuscriptId: '',\n                            score: '',\n                            comment: ''\n                        };\n                    } catch(error) {\n                        this.$message({\n                            message: '评审失败',\n                            duration: 2000,\n                            type: 'error'\n                        });\n                        console.log(error);\n                    }\n                } else {\n                    this.$message({\n                        message: '请先填写评分和评论',\n                        duration: 2000,\n                        type: 'warning'\n                    });\n                    return false;\n                }\n            });\n        }\n    }\n}\n</script>\n\n<style>\n.handle-box {\n    margin-bottom: 20px;\n}\n\n.handle-select {\n    width: 120px;\n}\n\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n    \n}\n.red {\n    color: #ff0000;\n}\n.mr10 {\n    margin-right: 10px;\n}\n.table-td-thumb {\n    display: block;\n    margin: auto;\n    width: 40px;\n    height: 40px;\n}\n.manuscript-content-box{\n    width: 50%;\n    height: 100%;\n    border-right: #c9c9c9 solid 1px;\n    padding-right: 10px;\n}\n.review-box{\n    width: 50%;\n    height: 100%;\n    padding-left: 10px;\n}\n.limit_wrap {\n    overflow: hidden;\n    -webkit-line-clamp: 3;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n}\n/* .limit_wrap:hover {\n    display: block;\n} */\n</style>","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstReview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstReview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FirstReview.vue?vue&type=template&id=17f86fea&\"\nimport script from \"./FirstReview.vue?vue&type=script&lang=js&\"\nexport * from \"./FirstReview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FirstReview.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./FirstReview.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}