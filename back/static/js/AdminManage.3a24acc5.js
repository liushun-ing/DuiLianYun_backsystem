(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AdminManage"],{"7aa0":function(e,t,a){},"89f6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 管理员管理\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"姓名或账号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.inputKey,callback:function(t){e.inputKey=t},expression:"inputKey"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.adminList,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"adminName",label:"管理员姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"adminAccount",label:"账号",align:"center"}}),a("el-table-column",{attrs:{prop:"adminPassword",label:"密码",align:"center"}}),a("el-table-column",{attrs:{label:"账号类型","min-width":"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"0"===t.row.adminType?"warning":"success"}},[e._v(e._s("0"===t.row.adminType?"超级管理员":"普通管理员"))])]}}])}),a("el-table-column",{attrs:{prop:"adminCreateTime",label:"创建时间",align:"center",sortable:""}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"blue",attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),"11111111"!==t.row.adminId?a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handlePageChange,"prev-click":e.handlePagePrev,"next-click":e.handlePageNext}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"管理员id"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.editForm.adminId,callback:function(t){e.$set(e.editForm,"adminId",t)},expression:"editForm.adminId"}})],1),a("el-form-item",{attrs:{label:"管理员姓名",prop:"adminName"}},[a("el-input",{model:{value:e.editForm.adminName,callback:function(t){e.$set(e.editForm,"adminName",t)},expression:"editForm.adminName"}})],1),a("el-form-item",{attrs:{label:"管理员账号",prop:"adminAccount"}},[a("el-input",{model:{value:e.editForm.adminAccount,callback:function(t){e.$set(e.editForm,"adminAccount",t)},expression:"editForm.adminAccount"}})],1),a("el-form-item",{attrs:{label:"管理员密码",prop:"adminPassword"}},[a("el-input",{model:{value:e.editForm.adminPassword,callback:function(t){e.$set(e.editForm,"adminPassword",t)},expression:"editForm.adminPassword"}})],1),a("el-form-item",{attrs:{label:"选择管理员类型",prop:"adminType"}},[a("el-radio-group",{model:{value:e.editForm.adminType,callback:function(t){e.$set(e.editForm,"adminType",t)},expression:"editForm.adminType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("普通管理员")]),a("el-radio",{attrs:{label:"0"}},[e._v("超级管理员")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit("editForm")}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"新增",visible:e.addVisible,width:"30%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"管理员姓名",prop:"adminName"}},[a("el-input",{model:{value:e.addForm.adminName,callback:function(t){e.$set(e.addForm,"adminName",t)},expression:"addForm.adminName"}})],1),a("el-form-item",{attrs:{label:"管理员账号",prop:"adminAccount"}},[a("el-input",{model:{value:e.addForm.adminAccount,callback:function(t){e.$set(e.addForm,"adminAccount",t)},expression:"addForm.adminAccount"}})],1),a("el-form-item",{attrs:{label:"管理员密码",prop:"adminPassword"}},[a("el-input",{model:{value:e.addForm.adminPassword,callback:function(t){e.$set(e.addForm,"adminPassword",t)},expression:"addForm.adminPassword"}})],1),a("el-form-item",{attrs:{label:"选择管理员类型",prop:"adminType"}},[a("el-radio-group",{model:{value:e.addForm.adminType,callback:function(t){e.$set(e.addForm,"adminType",t)},expression:"addForm.adminType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("普通管理员")]),a("el-radio",{attrs:{label:"0"}},[e._v("超级管理员")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelAdd}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveAdd("addForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],r=(a("ac6a"),a("6762"),a("2fdb"),a("96cf"),a("1da1")),s=(a("55dd"),{name:"AdminManage",data:function(){return{inputKey:"",allAdmin:[],adminList:[],currentPage:1,pageSize:10,total:0,editForm:{},editIndex:-1,editVisible:!1,addVisible:!1,addForm:{},rules:{adminName:[{required:!0,message:"请输入管理员姓名",trigger:"blur"}],adminAccount:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],adminPassword:[{required:!0,message:"请输入管理员密码",trigger:"blur"}],adminType:[{required:!0,message:"请选择账号类型",trigger:"blur"}]}}},activated:function(){this.getAllAdmin(),this.currentPage=1,this.adminList=[]},methods:{sortByTime:function(e){return e.sort((function(e,t){var a=new Date(e.adminCreatetime).getTime(),n=new Date(t.adminCreatetime).getTime();return a>n?-1:a<n?1:0}))},getAllAdmin:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.admin.getAdminList();case 3:t=e.sent,this.allAdmin=this.sortByTime(t.adminList),this.total=t.total,this.getAdminList(),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$message({message:"获取管理员列表失败",duration:2e3,type:"error"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),getAdminList:function(){var e=this;if(this.inputKey){var t=this.allAdmin.filter((function(t,a){return t.adminName.includes(e.inputKey)})),a=this.allAdmin.filter((function(t,a){return t.adminAccount.includes(e.inputKey)}));t=t.concat(a),this.adminList=t.filter((function(t,a){return a<e.currentPage*e.pageSize&&a>=(e.currentPage-1)*e.pageSize}))}else this.adminList=this.allAdmin.filter((function(t,a){return a<e.currentPage*e.pageSize&&a>=(e.currentPage-1)*e.pageSize}))},handleRefresh:function(){var e=this.$message("刷新中");this.currentPage=1,this.inputKey="",this.getAdminList(),e.close()},handleSearch:function(){this.currentPage=1,this.getAdminList(),this.total=this.adminList.length},handlePageChange:function(e){this.currentPage=e,this.getAdminList()},handlePagePrev:function(){this.currentPage--},handlePageNext:function(){this.currentPage++},handleEdit:function(e,t){this.editIndex=e,this.editForm=JSON.parse(JSON.stringify(t)),this.editVisible=!0},handleAdd:function(){this.addVisible=!0,this.addForm={adminName:"",adminAccount:"",adminPassword:"",adminType:"1"}},cancelEdit:function(){this.editVisible=!1,this.editForm={},this.$message({message:"操作已取消",duration:1500,type:"info"}),this.$refs["editForm"].clearValidate()},cancelAdd:function(){this.addVisible=!1,this.addForm={},this.$message({message:"操作已取消",duration:1500,type:"info"}),this.$refs["addForm"].clearValidate()},saveAdd:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}if(n=!1,t.allAdmin.forEach((function(e){e.adminAccount===t.addForm.adminAccount&&(n=!0)})),!n){e.next=6;break}return t.$message({message:"该账号已存在,请修改账号后再次提交",duration:3e3,type:"warning"}),e.abrupt("return",!1);case 6:return t.addVisible=!1,e.prev=7,e.next=10,t.$api.admin.addAdmin(t.addForm);case 10:t.$message({message:"新增成功",duration:2e3,type:"success"}),t.getAllAdmin(),t.getAdminList(),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](7),t.$message({message:"新增管理员失败",duration:2e3,type:"error"}),console.log(e.t0);case 19:e.next=23;break;case 21:return console.log("新增管理员验证表单失败"),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}())},saveEdit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=16;break}return t.editVisible=!1,e.prev=2,e.next=5,t.$api.admin.modifyAdmin(t.editForm);case 5:t.$message({message:"修改成功",duration:2e3,type:"success"}),t.$set(t.adminList,t.editIndex,t.editForm),t.$set(t.allAdmin,(t.currentPage-1)*t.pageSize+t.editIndex,t.editForm),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),t.$message({message:"修改失败",duration:2e3,type:"error"}),console.log(e.t0);case 14:e.next=18;break;case 16:return console.log("验证修改管理员表单失败"),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}())},handleDelete:function(e,t){var a=this;this.$confirm("该管理员账号将永久删除，确定要继续吗？","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={adminId:t.adminId},e.prev=1,e.next=4,a.$api.admin.deleteAdmin(n);case 4:a.$message({message:"删除成功",duration:2e3,type:"success"}),a.getAllAdmin(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),a.$message({message:"删除失败",duration:2e3,type:"error"}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).catch((function(){a.$message({message:"操作已取消",duration:1500,type:"info"})}))}}}),l=s,d=(a("f66e"),a("0c7c")),o=Object(d["a"])(l,n,i,!1,null,"43e05955",null);t["default"]=o.exports},f66e:function(e,t,a){"use strict";a("7aa0")}}]);
//# sourceMappingURL=AdminManage.3a24acc5.js.map