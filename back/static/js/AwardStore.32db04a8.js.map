{"version":3,"sources":["webpack:///./src/components/page/competition_about/AwardExport.vue?2b1a","webpack:///src/components/page/competition_about/AwardExport.vue","webpack:///./src/components/page/competition_about/AwardExport.vue?567b","webpack:///./src/components/page/competition_about/AwardExport.vue","webpack:///./src/components/page/competition_about/AwardExport.vue?b022"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","changeCompetitionOptions","model","value","callback","$$v","selectedCompetitionId","expression","_l","item","key","label","allAward","length","beforeExport","json_fields","header","name","ref","awardList","currentPage","pageSize","total","handlePageChange","handlePagePrev","handlePageNext","staticRenderFns","competitionList","sortByTime","res","forEach","competitionOptions","options","$message","console","log","component"],"mappings":"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","file":"static/js/AwardStore.32db04a8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-lx-cascades\"}),_vm._v(\" 获奖作品导出\\n            \")])],1)],1),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"handle-box\"},[_c('div',[_vm._v(\"\\n                请选择比赛场次: \\n                \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},on:{\"change\":_vm.changeCompetitionOptions},model:{value:(_vm.selectedCompetitionId),callback:function ($$v) {_vm.selectedCompetitionId=$$v},expression:\"selectedCompetitionId\"}},_vm._l((_vm.competitionOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('div',[(_vm.allAward.length === 0)?_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":_vm.beforeExport}},[_vm._v(\"导出EXCEL\")]):_c('download-excel',{staticClass:\"export-excel-wrapper\",attrs:{\"data\":_vm.allAward,\"fields\":_vm.json_fields,\"header\":_vm.header,\"name\":_vm.name}},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"}},[_vm._v(\"导出EXCEL\")])],1)],1)]),_c('el-table',{ref:\"multipleTable\",staticClass:\"table\",attrs:{\"data\":_vm.awardList,\"border\":\"\",\"header-cell-class-name\":\"table-header\"}},[_c('el-table-column',{attrs:{\"prop\":\"awardNumber\",\"label\":\"获奖编号\",\"min-width\":\"150\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptUserName\",\"label\":\"获奖人\",\"min-width\":\"150\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"userIntroduction\",\"label\":\"获奖人简介\",\"min-width\":\"250\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"awardContent\",\"label\":\"获奖作品\",\"min-width\":\"300\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"awardDetail\",\"min-width\":\"150\",\"label\":\"奖项\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptUserProvince\",\"min-width\":\"150\",\"label\":\"省份\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptUserAddress\",\"min-width\":\"200\",\"label\":\"详细地址\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptUserPhone\",\"min-width\":\"150\",\"label\":\"电话\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"manuscriptUserEmail\",\"min-width\":\"180\",\"label\":\"邮箱\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"awardCreateTime\",\"width\":\"160\",\"label\":\"获奖时间\",\"align\":\"center\",\"sortable\":\"\"}})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"current-change\":_vm.handlePageChange,\"prev-click\":_vm.handlePagePrev,\"next-click\":_vm.handlePageNext}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item>\n                    <i class=\"el-icon-lx-cascades\"></i> 获奖作品导出\n                </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"handle-box\">\n                <div>\n                    请选择比赛场次:&nbsp;\n                    <el-select v-model=\"selectedCompetitionId\" placeholder=\"请选择\" @change=\"changeCompetitionOptions\">\n                        <el-option\n                            v-for=\"item in competitionOptions\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                        </el-option>\n                    </el-select>                    \n                </div>\n                <div>\n                    <el-button v-if=\"allAward.length === 0\" type=\"success\" @click=\"beforeExport\" size=\"small\">导出EXCEL</el-button>\n                    <download-excel\n                        v-else\n                        class=\"export-excel-wrapper\"\n                        :data=\"allAward\"\n                        :fields=\"json_fields\"\n                        :header=\"header\"\n                        :name=\"name\">\n                        <el-button type=\"success\" size=\"small\">导出EXCEL</el-button>\n                    </download-excel>\n                </div>\n            </div>\n            <el-table\n                :data=\"awardList\"\n                border\n                class=\"table\"\n                ref=\"multipleTable\"\n                header-cell-class-name=\"table-header\"\n            >\n                <el-table-column prop=\"awardNumber\" label=\"获奖编号\" min-width=\"150\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"manuscriptUserName\" label=\"获奖人\" min-width=\"150\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"userIntroduction\" label=\"获奖人简介\" min-width=\"250\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"awardContent\" label=\"获奖作品\" min-width=\"300\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"awardDetail\" min-width=\"150\" label=\"奖项\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"manuscriptUserProvince\" min-width=\"150\" label=\"省份\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"manuscriptUserAddress\" min-width=\"200\" label=\"详细地址\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"manuscriptUserPhone\" min-width=\"150\" label=\"电话\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"manuscriptUserEmail\" min-width=\"180\" label=\"邮箱\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"awardCreateTime\" width=\"160\" label=\"获奖时间\" align=\"center\" sortable></el-table-column>\n            </el-table>\n            <div class=\"pagination\">\n                <el-pagination\n                    background\n                    layout=\"total, prev, pager, next\"\n                    :current-page=\"currentPage\"\n                    :page-size=\"pageSize\"\n                    :total=\"total\"\n                    @current-change=\"handlePageChange\"\n                    @prev-click=\"handlePagePrev\"\n                    @next-click=\"handlePageNext\"\n                ></el-pagination>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: 'AwardExport',\n    data() {\n        return {\n            allAward: [],\n            awardList: [],\n            currentPage: 1,\n            total: 0,\n            pageSize: 10,\n\n            selectedCompetitionId: '',\n            competitionList: [],\n            competitionOptions: [],\n            header: '',\n            name: '',\n\n            json_fields: {\n                获奖编号: \"awardNumber\",\n                获奖人: \"manuscriptUserName\",\n                获奖人简介: \"userIntroduction\",\n                获奖作品: \"awardContent\",\n                奖项: \"awardDetail\",\n                获奖人省份: \"manuscriptUserProvince\",\n                获奖人详细地址: \"manuscriptUserAddress\",\n                获奖人电话: \"manuscriptUserPhone\",\n                获奖人邮箱: \"manuscriptUserEmail\",\n                获奖时间: \"awardCreateTime\"    //如果命名的标题有空格,需要用双引号\n            },\n            json_meta: [\n                [\n                    {\n                        \" key \": \" charset \",\n                        \" value \": \" utf- 8 \"\n                    }\n                ]\n            ]\n        };\n    },\n    activated() {\n        this.getCompetitionList();\n    },\n    methods: {\n        sortByTime(array) {\n            return array.sort(function(a, b) {\n                var time1 = new Date(a.createTime).getTime();\n                var time2 = new Date(b.createtime).getTime();\n                return time1 > time2 ? -1 : time1 < time2 ? 1 : 0;\n            })\n        },\n\n        async getCompetitionList() {\n            try {\n                const res = await this.$api.competition.getAllCompetition();\n                this.competitionList = this.sortByTime(res.competitionList);\n                // 将数据转换为下拉框，value是比赛id,label是名称\n                let options = [];\n                this.competitionList.forEach((item, index) => {\n                    options.push({\n                        value: item.competitionId,\n                        label: item.competitionName\n                    });                    \n                });\n                this.competitionOptions = options;\n            } catch (error) {\n                this.$message({\n                    message: '获取比赛列表失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        sortByAwardNumber(array) {\n            // 自定义函数，返回值为-1表示的是此次不需要交换，保持原来顺序\n            return array.sort(function(a, b) {\n                var num1 = a.awardNumber;\n                var num2 = b.awardNumber;\n                return num1 < num2 ? -1 : num1 > num2 ? 1 : 0;\n            })\n        },\n\n        // 选择比赛\n        async changeCompetitionOptions(value) {\n            if(value) {\n                this.selectedCompetitionId = value;\n                let params = {\n                    awardCompetitionId: value\n                };\n                try {\n                    const res = await this.$api.competition.getAllAward(params);\n                    this.allAward = this.sortByAwardNumber(res.awardList);\n                    this.total = res.total;\n                    this.getAwardList();\n                    // 设置exel的header\n                    const index = this.competitionList.findIndex((item, index) => {\n                        return item.competitionId = this.selectedCompetitionId;\n                    });\n                    this.header = this.competitionList[index].competitionName + '获奖作品列表';\n                    this.name = this.competitionList[index].competitionName + '获奖作品列表'\n                } catch (error) {\n                    this.$message({\n                        message: '获取该比赛获奖作品信息失败',\n                        duration: 2000,\n                        type: 'error'\n                    });\n                    console.log(error);\n                }             \n            }\n        },\n\n        getAwardList() {\n            this.awardList = this.allAward.filter((item, index) => {\n                return index < this.currentPage * this.pageSize && index >= (this.currentPage - 1) * this.pageSize;\n            })\n            this.total = this.awardList.length;\n        },\n\n        //触发刷新\n        handleRefresh() {\n            let messageObject = this.$message('刷新中');\n            this.currentPage = 1;\n            this.getAwardList();\n            messageObject.close();\n        },\n\n        // 分页导航\n        handlePageChange(val) {\n            this.currentPage = val;\n            this.getAwardList();\n        },\n        handlePagePrev(){\n            this.currentPage--;\n        },\n        handlePageNext(){\n            this.currentPage++;\n        },\n      \n        beforeExport() {\n            this.$message({\n                message: '当前没有数据可以导出',\n                duration: 2000,\n                type: 'warning'\n            });\n        }\n    }\n};\n</script>\n\n<style scoped>\n.handle-box {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n    font-size: 14px;\n}\n\n\n.handle-select {\n    width: 120px;\n}\n\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n}\n.red {\n    color: #ff0000;\n}\n.mr10 {\n    margin-right: 10px;\n}\n.table-td-thumb {\n    display: block;\n    margin: auto;\n    width: 40px;\n    height: 40px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AwardExport.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AwardExport.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AwardExport.vue?vue&type=template&id=1a525a4f&scoped=true&\"\nimport script from \"./AwardExport.vue?vue&type=script&lang=js&\"\nexport * from \"./AwardExport.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AwardExport.vue?vue&type=style&index=0&id=1a525a4f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a525a4f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AwardExport.vue?vue&type=style&index=0&id=1a525a4f&scoped=true&lang=css&\""],"sourceRoot":""}