(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AwardStore"],{"1d59":function(e,t,a){},"4a9a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 获奖作品导出\n            ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("div",[e._v("\n                请选择比赛场次: \n                "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeCompetitionOptions},model:{value:e.selectedCompetitionId,callback:function(t){e.selectedCompetitionId=t},expression:"selectedCompetitionId"}},e._l(e.competitionOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",[0===e.allAward.length?a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.beforeExport}},[e._v("导出EXCEL")]):a("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:e.allAward,fields:e.json_fields,header:e.header,name:e.name}},[a("el-button",{attrs:{type:"success",size:"small"}},[e._v("导出EXCEL")])],1)],1)]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.awardList,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"awardNumber",label:"获奖编号","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{prop:"manuscriptUserName",label:"获奖人","min-width":"150",align:"center"}}),a("el-table-column",{attrs:{prop:"userIntroduction",label:"获奖人简介","min-width":"250",align:"center"}}),a("el-table-column",{attrs:{prop:"awardContent",label:"获奖作品","min-width":"300",align:"center"}}),a("el-table-column",{attrs:{prop:"awardDetail","min-width":"150",label:"奖项",align:"center"}}),a("el-table-column",{attrs:{prop:"manuscriptUserProvince","min-width":"150",label:"省份",align:"center"}}),a("el-table-column",{attrs:{prop:"manuscriptUserAddress","min-width":"200",label:"详细地址",align:"center"}}),a("el-table-column",{attrs:{prop:"manuscriptUserPhone","min-width":"150",label:"电话",align:"center"}}),a("el-table-column",{attrs:{prop:"manuscriptUserEmail","min-width":"180",label:"邮箱",align:"center"}}),a("el-table-column",{attrs:{prop:"awardCreateTime",width:"160",label:"获奖时间",align:"center",sortable:""}})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handlePageChange,"prev-click":e.handlePagePrev,"next-click":e.handlePageNext}})],1)],1)])},i=[],r=(a("20d6"),a("ac6a"),a("96cf"),a("1da1")),s=(a("55dd"),{name:"AwardExport",data:function(){return{allAward:[],awardList:[],currentPage:1,total:0,pageSize:10,selectedCompetitionId:"",competitionList:[],competitionOptions:[],header:"",name:"",json_fields:{获奖编号:"awardNumber",获奖人:"manuscriptUserName",获奖人简介:"userIntroduction",获奖作品:"awardContent",奖项:"awardDetail",获奖人省份:"manuscriptUserProvince",获奖人详细地址:"manuscriptUserAddress",获奖人电话:"manuscriptUserPhone",获奖人邮箱:"manuscriptUserEmail",获奖时间:"awardCreateTime"},json_meta:[[{" key ":" charset "," value ":" utf- 8 "}]]}},activated:function(){this.getCompetitionList()},methods:{sortByTime:function(e){return e.sort((function(e,t){var a=new Date(e.createTime).getTime(),n=new Date(t.createtime).getTime();return a>n?-1:a<n?1:0}))},getCompetitionList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.competition.getAllCompetition();case 3:t=e.sent,this.competitionList=this.sortByTime(t.competitionList),a=[],this.competitionList.forEach((function(e,t){a.push({value:e.competitionId,label:e.competitionName})})),this.competitionOptions=a,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$message({message:"获取比赛列表失败",duration:2e3,type:"error"}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),sortByAwardNumber:function(e){return e.sort((function(e,t){var a=e.awardNumber,n=t.awardNumber;return a<n?-1:a>n?1:0}))},changeCompetitionOptions:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}return this.selectedCompetitionId=t,a={awardCompetitionId:t},e.prev=3,e.next=6,this.$api.competition.getAllAward(a);case 6:n=e.sent,this.allAward=this.sortByAwardNumber(n.awardList),this.total=n.total,this.getAwardList(),i=this.competitionList.findIndex((function(e,t){return e.competitionId=r.selectedCompetitionId})),this.header=this.competitionList[i].competitionName+"获奖作品列表",this.name=this.competitionList[i].competitionName+"获奖作品列表",e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),this.$message({message:"获取该比赛获奖作品信息失败",duration:2e3,type:"error"}),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[3,15]])})));function t(t){return e.apply(this,arguments)}return t}(),getAwardList:function(){var e=this;this.awardList=this.allAward.filter((function(t,a){return a<e.currentPage*e.pageSize&&a>=(e.currentPage-1)*e.pageSize})),this.total=this.awardList.length},handleRefresh:function(){var e=this.$message("刷新中");this.currentPage=1,this.getAwardList(),e.close()},handlePageChange:function(e){this.currentPage=e,this.getAwardList()},handlePagePrev:function(){this.currentPage--},handlePageNext:function(){this.currentPage++},beforeExport:function(){this.$message({message:"当前没有数据可以导出",duration:2e3,type:"warning"})}}}),o=s,l=(a("9446"),a("0c7c")),c=Object(l["a"])(o,n,i,!1,null,"1a525a4f",null);t["default"]=c.exports},9446:function(e,t,a){"use strict";a("1d59")}}]);
//# sourceMappingURL=AwardStore.32db04a8.js.map