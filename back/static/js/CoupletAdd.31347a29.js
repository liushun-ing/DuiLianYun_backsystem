(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CoupletAdd"],{4990:function(t,e,o){"use strict";o("7419")},"6e42":function(t,e,o){"use strict";o.r(e);var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:">"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/couplet_about/MasterManage"}}},[o("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 楹联家管理\n            ")]),o("el-breadcrumb-item",[t._v("\n                添加楹联\n            ")])],1)],1),o("div",{staticClass:"container"},[o("div",{staticClass:"title_and_action"},[o("div",{staticClass:"title_wrap"},[t._v("楹联添加")]),o("div",[o("el-button",{attrs:{type:"warning"},on:{click:t.reset}},[t._v("重置")]),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("coupletForm")}}},[t._v("添加楹联")])],1)]),o("el-form",{ref:"coupletForm",attrs:{model:t.coupletForm,rules:t.rules}},[o("el-descriptions",{attrs:{direction:"vertical",column:4,border:"",size:"medium"}},[o("el-descriptions-item",{attrs:{label:"作者",span:1}},[o("el-form-item",{attrs:{prop:"coupletAuthorName"}},[o("el-input",{attrs:{readonly:!0},model:{value:t.coupletForm.coupletAuthorName,callback:function(e){t.$set(t.coupletForm,"coupletAuthorName",e)},expression:"coupletForm.coupletAuthorName"}})],1)],1),o("el-descriptions-item",{attrs:{label:"朝代",span:1}},[o("el-form-item",{attrs:{prop:"coupletDynasty"}},[o("el-input",{attrs:{readonly:!0},model:{value:t.coupletForm.coupletDynasty,callback:function(e){t.$set(t.coupletForm,"coupletDynasty",e)},expression:"coupletForm.coupletDynasty"}})],1)],1),o("el-descriptions-item",{attrs:{label:"类型",span:1}},[o("el-form-item",{attrs:{prop:"coupletTypeId"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型"},model:{value:t.coupletForm.coupletTypeId,callback:function(e){t.$set(t.coupletForm,"coupletTypeId",e)},expression:"coupletForm.coupletTypeId"}},t._l(t.coupletTypeList,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),o("el-descriptions-item",{attrs:{label:"出处",span:1}},[o("el-form-item",{attrs:{prop:"coupletFrom"}},[o("el-input",{attrs:{placeholder:"请输入楹联出处"},model:{value:t.coupletForm.coupletFrom,callback:function(e){t.$set(t.coupletForm,"coupletFrom",e)},expression:"coupletForm.coupletFrom"}})],1)],1),o("el-descriptions-item",{attrs:{label:"标题+上联+下联（以标题，上联，下联顺序，换行分隔）",span:2}},[o("el-form-item",{attrs:{prop:"titleAndCoupletText"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入标题和上下联"},on:{blur:t.loseBlur,focus:t.getFocus},model:{value:t.coupletForm.titleAndCoupletText,callback:function(e){t.$set(t.coupletForm,"titleAndCoupletText",e)},expression:"coupletForm.titleAndCoupletText"}})],1)],1),o("el-descriptions-item",{attrs:{label:"注释",span:1}},[o("el-form-item",{attrs:{prop:"coupletExplanation"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入楹联注释"},model:{value:t.coupletForm.coupletExplanation,callback:function(e){t.$set(t.coupletForm,"coupletExplanation",e)},expression:"coupletForm.coupletExplanation"}})],1)],1),o("el-descriptions-item",{attrs:{label:"赏析",span:1}},[o("el-form-item",{attrs:{prop:"coupletAppreaciation"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请输入楹联赏析"},model:{value:t.coupletForm.coupletAppreaciation,callback:function(e){t.$set(t.coupletForm,"coupletAppreaciation",e)},expression:"coupletForm.coupletAppreaciation"}})],1)],1)],1)],1)],1)])},r=[],u=(o("96cf"),o("1da1")),p=(o("28a5"),{name:"CoupletAdd",data:function(){var t=function(t,e,o){if(""===e)o(new Error("请输入标题和上下联"));else{var l=e.split(/[(\r\n)\r\n]+/);l=l.filter((function(t,e){return t&&"标题: "!=t&&"上联: "!=t&&"下联: "!=t})),3!=l.length?o(new Error("格式有误或输入不完全，匹配失败")):o()}};return{coupletForm:{titleAndCoupletText:"",coupletAuthorId:"",coupletAuthorName:"",coupletTitle:"",coupletFrom:"",coupletDynasty:"",coupletFirstLine:"",coupletSecondLine:"",coupletTypeId:"",coupletAppreaciation:"",coupletExplanation:""},tempData:"",coupletTypeList:[],rules:{titleAndCoupletText:[{required:!0,validator:t,trigger:["change","blur"]}],coupletTypeId:[{required:!0,message:"选择楹联类型",trigger:"blur"}],coupletFrom:[{required:!0,message:"请输入楹联出处",trigger:"blur"}],coupletAppreaciation:[{required:!0,message:"请输入楹联赏析",trigger:"blur"}],coupletExplanation:[{required:!0,message:"请输入楹联注释",trigger:"blur"}]}}},activated:function(){this.coupletForm.coupletAuthorId=this.$route.query.coupletAuthorId,this.coupletForm.coupletDynasty=this.$route.query.coupletDynasty,this.coupletForm.coupletAuthorName=this.$route.query.coupletAuthorName,this.getCoupletType()},methods:{getCoupletType:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$api.couplet.getCoupletTypeList();case 3:e=t.sent,this.coupletTypeList=e.coupletTypeList,this.coupletTypeList=this.coupletTypeList.map((function(t){return{value:t.coupletTypeId,label:t.coupletTypeDetail}})),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$message({message:"自动获取楹联类型失败，请重新尝试",duration:2e3,type:"error"}),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),loseBlur:function(){if(this.tempData=this.coupletForm.titleAndCoupletText,this.coupletForm.titleAndCoupletText){var t=this.coupletForm.titleAndCoupletText.split(/[(\r\n)\r\n]+/);t=t.filter((function(t,e){return t})),this.coupletForm.coupletTitle=t[0],this.coupletForm.coupletFirstLine=t[1],this.coupletForm.coupletSecondLine=t[2],0===t.length?this.coupletForm.titleAndCoupletText="标题: \n上联: \n下联: ":1===t.length?this.coupletForm.titleAndCoupletText="标题: "+t[0]+"\n上联: \n下联: ":2===t.length?this.coupletForm.titleAndCoupletText="标题: "+t[0]+"\n上联: "+t[1]+"\n下联: ":this.coupletForm.titleAndCoupletText="标题: "+t[0]+"\n上联: "+t[1]+"\n下联: "+t[2]}},getFocus:function(){this.coupletForm.titleAndCoupletText=this.tempData},submit:function(t){var e=this;this.$refs[t].validate(function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(o){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=15;break}return l={coupletAuthorId:e.coupletForm.coupletAuthorId,coupletAuthorName:e.coupletForm.coupletAuthorName,coupletTitle:e.coupletForm.coupletTitle,coupletFrom:e.coupletForm.coupletFrom,coupletDynasty:e.coupletForm.coupletDynasty,coupletFirstLine:e.coupletForm.coupletFirstLine,coupletSecondLine:e.coupletForm.coupletSecondLine,coupletTypeId:e.coupletForm.coupletTypeId,coupletAppreaciation:e.coupletForm.coupletAppreaciation,coupletExplanation:e.coupletForm.coupletExplanation},t.prev=2,t.next=5,e.$api.couplet.addCouplet(l);case 5:e.$message({message:"增加楹联成功",duration:2e3,type:"success"}),e.reset(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](2),e.$message({message:"增加楹联失败",duration:2e3,type:"error"}),console.log(t.t0);case 13:t.next=17;break;case 15:return console.log("增加楹联表单验证失败"),t.abrupt("return",!1);case 17:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}())},reset:function(){var t=this;this.coupletForm={titleAndCoupletText:"",coupletAuthorId:this.$route.query.coupletAuthorId,coupletAuthorName:this.$route.query.coupletAuthorName,coupletTitle:"",coupletFrom:"",coupletDynasty:this.$route.query.coupletDynasty,coupletFirstLine:"",coupletSecondLine:"",coupletTypeId:"",coupletAppreaciation:"",coupletExplanation:""},this.tempData="",setTimeout((function(){t.$refs["coupletForm"].clearValidate()}),500)}}}),c=p,a=(o("4990"),o("0c7c")),i=Object(a["a"])(c,l,r,!1,null,"22556b00",null);e["default"]=i.exports},7419:function(t,e,o){}}]);
//# sourceMappingURL=CoupletAdd.31347a29.js.map