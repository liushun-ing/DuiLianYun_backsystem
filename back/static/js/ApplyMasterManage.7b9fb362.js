(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ApplyMasterManage"],{"263f":function(e,t,s){},"34cd":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 楹联家申请管理\n            ")])],1)],1),s("div",{staticClass:"container"},[s("div",{staticClass:"handle-box"},[s("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"昵称/姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.inputKey,callback:function(t){e.inputKey=t},expression:"inputKey"}}),s("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")]),s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),s("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.masterApplyList,border:"","header-cell-class-name":"table-header"}},[s("el-table-column",{attrs:{prop:"userNickname",label:"昵称","min-width":"150",align:"center"}}),s("el-table-column",{attrs:{prop:"userName",label:"姓名","min-width":"150",align:"center"}}),s("el-table-column",{attrs:{label:"头像(查看大图)","min-width":"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticClass:"table-td-thumb",attrs:{src:e.row.userPortrait,"preview-src-list":[e.row.userPortrait]}})]}}])}),s("el-table-column",{attrs:{prop:"userPhone",label:"电话","min-width":"150",align:"center"}}),s("el-table-column",{attrs:{prop:"userBirthday",label:"出生日期","min-width":"150",align:"center"}}),s("el-table-column",{attrs:{prop:"userLocation",label:"住址","min-width":"200",align:"center"}}),s("el-table-column",{attrs:{prop:"userMotto",label:"座右铭","min-width":"200",align:"center"}}),s("el-table-column",{attrs:{prop:"userIntroduction",label:"个人简介","min-width":"300",align:"center"}}),s("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.userApplyStatus?s("div",[s("el-button",{attrs:{type:"text",icon:"el-icon-success"},on:{click:function(s){return e.handlePass(t.$index,t.row)}}},[e._v("通过")]),s("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-error"},on:{click:function(s){return e.handleDeny(t.$index,t.row)}}},[e._v("不通过")])],1):2===t.row.userApplyStatus?s("div",[s("el-tag",[e._v("已通过")])],1):s("div",[s("el-tag",{attrs:{type:"info"}},[e._v("已拒绝")])],1)]}}])})],1),s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handlePageChange,"prev-click":e.handlePagePrev,"next-click":e.handlePageNext}})],1)],1),s("el-dialog",{attrs:{title:"申请审核",visible:e.passVisible,width:"40%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.passVisible=t}}},[s("div",{staticStyle:{"font-size":"18px","font-weight":"600","padding-bottom":"30px"}},[e._v("将通过该用户的楹联家申请，确定要继续吗？")]),s("el-checkbox",{model:{value:e.isSendNotice,callback:function(t){e.isSendNotice=t},expression:"isSendNotice"}},[e._v("是否自动发送如下通知")]),s("el-descriptions",{staticStyle:{"padding-top":"10px"},attrs:{column:1,border:""}},[s("el-descriptions-item",{attrs:{label:"通知标题"}},[e._v(e._s(e.noticeForm.noticeTitle))]),s("el-descriptions-item",{attrs:{label:"通知内容"}},[e._v(e._s(e.noticeForm.noticeContent))])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancelPass}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.savePass}},[e._v("确 定")])],1)],1),s("el-dialog",{attrs:{title:"申请审核",visible:e.denyVisible,width:"40%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.denyVisible=t}}},[s("div",{staticStyle:{"font-size":"18px","font-weight":"600","padding-bottom":"30px"}},[e._v("将拒绝该用户的楹联家申请，确定要继续吗？")]),s("el-checkbox",{model:{value:e.isSendNotice,callback:function(t){e.isSendNotice=t},expression:"isSendNotice"}},[e._v("是否自动发送如下通知")]),s("el-descriptions",{staticStyle:{"padding-top":"10px"},attrs:{column:1,border:""}},[s("el-descriptions-item",{attrs:{label:"通知标题"}},[e._v(e._s(e.noticeForm.noticeTitle))]),s("el-descriptions-item",{attrs:{label:"通知内容"}},[e._v(e._s(e.noticeForm.noticeContent))])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.cancelDeny}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.saveDeny}},[e._v("确 定")])],1)],1)],1)},a=[],n=(s("96cf"),s("1da1")),r=s("fa7d"),o={name:"ApplyMasterManage",data:function(){return{inputKey:"",masterApplyList:[],currentPage:1,total:0,pageSize:10,passVisible:!1,passForm:{},passIndex:-1,denyVisible:!1,denyForm:{},denyIndex:-1,noticeForm:{},isSendNotice:!0}},activated:function(){this.currentPage=1,this.inputKey="",this.getMasterApplyList()},methods:{getMasterApplyList:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={currentPage:this.currentPage,pageSize:this.pageSize,inputKey:this.inputKey},e.prev=1,e.next=4,this.$api.user.getMasterApplyList(t);case 4:s=e.sent,this.masterApplyList=s.masterApplyList,this.total=s.total,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message({message:"获取楹联家申请列表失败",duration:2e3,type:"error"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),handleRefresh:function(){var e=this.$message("刷新中");this.currentPage=1,this.inputKey="",this.getMasterApplyList(),e.close()},handleSearch:function(){this.currentPage=1,this.getMasterApplyList()},handlePageChange:function(e){this.currentPage=e,this.getMasterApplyList()},handlePagePrev:function(){this.currentPage--},handlePageNext:function(){this.currentPage++},cancelDeny:function(){this.denyVisible=!1,this.$message({message:"操作已取消",duration:1500,type:"info"}),this.$refs["denyForm"].clearValidate()},handleDeny:function(e,t){this.denyVisible=!0,this.denyIndex=e,this.denyForm=JSON.parse(JSON.stringify(t)),this.isSendNotice=!0,this.noticeForm=r["a"].getNoticeTemplate(10)},saveDeny:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.denyVisible=!1,t={userId:this.denyForm.userId},e.prev=2,e.next=5,this.$api.user.denyMasterApply(t);case 5:this.$message({message:"拒绝申请成功",duration:2e3,type:"success"}),this.masterApplyList[this.denyIndex].userApplyStatus=0,this.isSendNotice&&setTimeout((function(){r["a"].sendNotice(s.denyForm.userId,10)}),1e3),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$message({message:"拒绝申请失败",duration:2e3,type:"error"}),console.log(e.t0);case 14:case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}(),handlePass:function(e,t){this.passVisible=!0,this.passIndex=e,this.passForm=JSON.parse(JSON.stringify(t)),this.isSendNotice=!0,this.noticeForm=r["a"].getNoticeTemplate(9)},cancelPass:function(){this.passVisible=!1,this.$message({message:"操作已取消",duration:1500,type:"info"}),this.$refs["passForm"].clearValidate()},savePass:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.passVisible=!1,t={masterName:this.passForm.userName,masterDynasty:"当代",masterIntroduction:this.passForm.userIntroduction,masterPhoto:this.passForm.userPortrait,masterBindedUserId:this.passForm.userId},e.prev=2,e.next=5,this.$api.user.promoteUser(t);case 5:this.$message({message:"通过楹联家申请成功",duration:2e3,type:"success"}),this.masterApplyList[this.passIndex].userApplyStatus=2,this.isSendNotice&&setTimeout((function(){r["a"].sendNotice(s.passForm.userId,9)}),1e3),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),this.$message({message:"通过楹联家申请失败",duration:2e3,type:"error"}),console.log(e.t0);case 14:case 15:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}},l=o,c=(s("78fc"),s("0c7c")),p=Object(c["a"])(l,i,a,!1,null,"379a1a30",null);t["default"]=p.exports},"78fc":function(e,t,s){"use strict";s("263f")}}]);
//# sourceMappingURL=ApplyMasterManage.7b9fb362.js.map