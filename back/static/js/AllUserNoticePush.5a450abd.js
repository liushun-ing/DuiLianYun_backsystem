(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AllUserNoticePush"],{"083a":function(e,t,r){},1982:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 通知 ")]),r("el-breadcrumb-item",[e._v("群体通知")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"form-box"},[r("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"通知名称",prop:"noticeTitle"}},[r("el-input",{staticStyle:{width:"250px"},model:{value:e.form.noticeTitle,callback:function(t){e.$set(e.form,"noticeTitle",t)},expression:"form.noticeTitle"}})],1),r("el-form-item",{attrs:{label:"通知内容",prop:"noticeContent"}},[r("el-input",{staticClass:"introduction",attrs:{type:"textarea",rows:"5"},model:{value:e.form.noticeContent,callback:function(t){e.$set(e.form,"noticeContent",t)},expression:"form.noticeContent"}})],1),r("el-form-item",{attrs:{label:"通知附件小于10M"}},[r("el-upload",{ref:"uploadFile",staticClass:"file_wrap",attrs:{action:"uploadFileURL","http-request":e.uploadFile,"before-upload":e.beforeFileUpload,limit:1}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击选择附件")])],1)],1),r("el-form-item",[r("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("发送")])],1)],1)],1)])])},s=[],n=(r("7f7f"),r("96cf"),r("1da1")),i=r("fa7d"),o={name:"AllUserNoticePush",data:function(){return{form:{noticeTitle:"",noticeContent:"",attachmentSrc:""},messageObject:"",rules:{noticeTitle:[{required:!0,message:"请输入通知名称",trigger:"blur"},{min:1,max:10,message:"长度在 1 到 10 个字符"}],noticeContent:[{required:!0,message:"请输入通知内容",trigger:"blur"}]}}},methods:{uploadFile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].uploadFile("/user-server/user/uploadPortrait",t.file);case 3:r=e.sent,this.messageObject.close(),this.$set(this.form,"attachmentSrc",r.url),this.$message({message:"文件上传成功",duration:2e3,type:"success"}),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](0),this.messageObject.close(),console.log(e.t0),this.$message({message:"文件上传失败",duration:2e3,type:"error"});case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),beforeFileUpload:function(e){var t=e.name.lastIndexOf("."),r=e.name.slice(t),a=".doc"===r||".pdf"===r||".xls"===r||".xlsx"===r||".docx"===r;if(!a)return this.$message.error("上传文件只能是 doc/docx/pdf/xls/xlsx 格式!"),!1;var s=e.size/1024/1024<10;return s?(this.messageObject=this.$message({message:"上传中",duration:-1}),!0):(this.$message.error("文件大小不能超过10M!"),!1)},onSubmit:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=17;break}return a={noticeTitle:e.form.noticeTitle,noticeContent:e.form.noticeContent,attachmentSrc:e.form.attachmentSrc},t.prev=2,t.next=5,e.$api.notice.noticeAllUsers(a);case 5:e.$message({message:"通知发送成功",duration:2e3,type:"success"}),e.form={noticeTitle:null,noticeContent:null},e.$refs.uploadFile.clearFiles(),e.$refs["form"].clearValidate(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.$message({message:"通知发送失败",duration:2e3,type:"error"}),console.log(t.t0);case 15:t.next=19;break;case 17:return e.$message({message:"请先填写标题和内容",duration:2e3,type:warning}),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())}}},c=o,l=(r("eacc"),r("0c7c")),u=Object(l["a"])(c,a,s,!1,null,"6822de66",null);t["default"]=u.exports},eacc:function(e,t,r){"use strict";r("083a")}}]);
//# sourceMappingURL=AllUserNoticePush.5a450abd.js.map