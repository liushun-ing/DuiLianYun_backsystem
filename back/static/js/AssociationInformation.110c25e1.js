(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["AssociationInformation"],{"20e1":function(e,t,r){"use strict";r("545f")},"545f":function(e,t,r){},fd92:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 关于我们\n            ")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"title_and_action"},[r("div",{staticClass:"title_wrap"},[e._v("关于我们")]),r("div",[r("el-button",{attrs:{type:"warning"},on:{click:e.reset}},[e._v("重置")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("infoForm")}}},[e._v("提交修改")])],1)]),r("el-form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.rules}},[r("mavon-editor",{ref:"md",attrs:{toolbars:e.toolbars,autofocus:!1},on:{imgAdd:e.$imgAdd,imgDel:e.$imgDel},model:{value:e.infoForm.basicInfo,callback:function(t){e.$set(e.infoForm,"basicInfo",t)},expression:"infoForm.basicInfo"}})],1)],1)])},a=[],s=(r("96cf"),r("1da1")),o=r("fa7d"),i={name:"AssociationInformation",data:function(){return{toolbars:o["a"].toolbars,infoForm:{basicInfo:"",briefInfo:"",leadershipInfo:"",howToAddUs:""}}},activated:function(){this.getAssociationInfo()},methods:{beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t?this.$message({message:"上传中",duration:1e3,type:"info"}):this.$message.error("上传封面图片只能是 JPG或者PNG 格式!"),t},$imgAdd:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.beforeAvatarUpload(r)){e.next=2;break}return e.abrupt("return");case 2:return n=this.$message({message:"正在上传中...",type:"info",duration:0}),e.prev=3,e.next=6,o["a"].uploadFile("/post-server/manuscript/upload",r);case 6:a=e.sent,this.$refs.md.$img2Url(t,a.url),n.close(),this.$message({message:"图片上传成功",duration:2e3,type:"success"}),e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](3),n.close(),this.$message({message:"图片上传失败",duration:2e3,type:"error"}),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[3,12]])})));function t(t,r){return e.apply(this,arguments)}return t}(),$imgDel:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={url:t[0]},e.prev=1,e.next=4,this.$api.news.deleteImage(n);case 4:console.log("新闻内容图片删除成功"),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log("新闻内容图片删除失败"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t,r){return e.apply(this,arguments)}return t}(),getAssociationInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.admin.getAssociationInfo();case 3:t=e.sent,this.infoForm=t.associationInfo,e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message({message:"获取协会信息失败",duration:2e3,type:"error"}),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),submit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=13;break}return e.prev=1,e.next=4,t.$api.admin.modifyAssociationInfo(t.infoForm);case 4:t.$message({message:"修改成功",duration:2e3,type:"success"}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),t.$message({message:"修改失败",duration:2e3,type:"error"}),console.log(e.t0);case 11:e.next=15;break;case 13:return console.log("修改协会信息表单验证失败"),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}())},reset:function(){this.getAssociationInfo(),this.$refs["infoForm"].clearValidate()}}},c=i,u=(r("20e1"),r("0c7c")),l=Object(u["a"])(c,n,a,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=AssociationInformation.110c25e1.js.map