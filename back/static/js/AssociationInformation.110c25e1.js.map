{"version":3,"sources":["webpack:///./src/components/page/admin_about/AssociationInformation.vue?8140","webpack:///./src/components/page/admin_about/AssociationInformation.vue?150d","webpack:///src/components/page/admin_about/AssociationInformation.vue","webpack:///./src/components/page/admin_about/AssociationInformation.vue?19e0","webpack:///./src/components/page/admin_about/AssociationInformation.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","reset","$event","submit","ref","infoForm","rules","toolbars","$imgAdd","$imgDel","model","value","callback","$$v","$set","expression","staticRenderFns","$refs","md","$img2Url","pos","res","url","messageObject","close","$message","console","log","associationInfo","component"],"mappings":"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","file":"static/js/AssociationInformation.110c25e1.js","sourcesContent":["export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AssociationInformation.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-lx-cascades\"}),_vm._v(\" 关于我们\\n            \")])],1)],1),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"title_and_action\"},[_c('div',{staticClass:\"title_wrap\"},[_vm._v(\"关于我们\")]),_c('div',[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit('infoForm')}}},[_vm._v(\"提交修改\")])],1)]),_c('el-form',{ref:\"infoForm\",attrs:{\"model\":_vm.infoForm,\"rules\":_vm.rules}},[_c('mavon-editor',{ref:\"md\",attrs:{\"toolbars\":_vm.toolbars,\"autofocus\":false},on:{\"imgAdd\":_vm.$imgAdd,\"imgDel\":_vm.$imgDel},model:{value:(_vm.infoForm.basicInfo),callback:function ($$v) {_vm.$set(_vm.infoForm, \"basicInfo\", $$v)},expression:\"infoForm.basicInfo\"}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item>\n                    <i class=\"el-icon-lx-cascades\"></i> 关于我们\n                </el-breadcrumb-item> \n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"title_and_action\">\n                <div class=\"title_wrap\">关于我们</div>\n                <div>\n                    <el-button type=\"warning\" @click=\"reset\">重置</el-button>  \n                    <el-button type=\"primary\" @click=\"submit('infoForm')\">提交修改</el-button>                  \n                </div>\n            </div>\n            <el-form :model=\"infoForm\" ref=\"infoForm\" :rules=\"rules\">\n                <mavon-editor v-model=\"infoForm.basicInfo\" :toolbars=\"toolbars\" :autofocus=\"false\" ref=\"md\" @imgAdd=\"$imgAdd\" @imgDel=\"$imgDel\"/>\n                <!-- <el-descriptions direction=\"vertical\" :column=\"2\" border size=\"medium\">\n                    <el-descriptions-item label=\"协会基本信息\" :span=\"1\">\n                        <el-form-item prop=\"basicInfo\">\n                            <el-input type=\"textarea\" autosize v-model=\"infoForm.basicInfo\"></el-input>\n                        </el-form-item>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"协会简介\" :span=\"1\">\n                        <el-form-item prop=\"briefInfo\">\n                            <el-input type=\"textarea\" autosize v-model=\"infoForm.briefInfo\"></el-input>\n                        </el-form-item>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"协会领导机构\" :span=\"1\">\n                        <el-form-item prop=\"leadershipInfo\">\n                            <el-input type=\"textarea\" autosize v-model=\"infoForm.leadershipInfo\"></el-input>\n                        </el-form-item>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"如何加入我们\" :span=\"1\">\n                        <el-form-item prop=\"howToAddUs\">\n                            <el-input type=\"textarea\" autosize  v-model=\"infoForm.howToAddUs\"></el-input>\n                        </el-form-item>\n                    </el-descriptions-item>\n                </el-descriptions> -->\n            </el-form>\n        </div>\n    </div>\n</template>\n\n<script>\nimport utils from '../../../utils/utils'\nexport default {\n    name: 'AssociationInformation',\n    data() {\n        return {\n            toolbars: utils.toolbars,\n            infoForm: {\n                basicInfo: \"\",\n                briefInfo: \"\",\n                leadershipInfo: \"\",\n                howToAddUs: \"\"\n            },\n            // rules: {\n            //     basicInfo:[\n            //         {required: true, message: '请输入协会基本信息', trigger: 'blur'}\n            //     ],\n            //     briefInfo:[\n            //         {required: true, message: '请输入协会简介', trigger: 'blur'}\n            //     ],\n            //     leadershipInfo:[\n            //         {required: true, message: '请输入协会领导人员', trigger: 'blur'}\n            //     ],\n            //     howToAddUs:[\n            //         {required: true, message: '请输入加入方式', trigger: 'blur'}\n            //     ]\n            // }\n        };\n    },\n    activated() {\n        this.getAssociationInfo();\n    },\n    methods: {\n        // 上传前判断\n        beforeAvatarUpload(file) {\n            const isJPGOrPNG = (file.type === 'image/jpeg' || file.type === 'image/png');\n            if (!isJPGOrPNG) {\n                this.$message.error('上传封面图片只能是 JPG或者PNG 格式!');\n            }\n            else{\n                this.$message({\n                    message: '上传中',\n                    duration: 1000,\n                    type: 'info'\n                });\n            }\n            return isJPGOrPNG;\n        },\n\n        // 绑定@imgAdd event\n        async $imgAdd(pos, $file){\n            if(!this.beforeAvatarUpload($file)) {\n                return;\n            }\n            let messageObject = this.$message({\n                message: '正在上传中...',\n                type: 'info',\n                duration: 0\n            });\n            try {\n                // 第一步.将图片上传到服务器.\n                const res = await utils.uploadFile('/post-server/manuscript/upload', $file);\n                // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n                this.$refs.md.$img2Url(pos, res.url);\n                messageObject.close();\n                this.$message({\n                    message: '图片上传成功',\n                    duration: 2000,\n                    type: 'success'\n                });\n            } catch (error) {\n                messageObject.close();\n                this.$message({\n                    message: '图片上传失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        // 删除markdown图片\n        async $imgDel(pos, $file) {\n            let params = {\n                url: pos[0]\n            };\n            try {\n                await this.$api.news.deleteImage(params);\n                console.log(\"新闻内容图片删除成功\");\n            } catch (error) {\n                console.log(\"新闻内容图片删除失败\");\n                console.log(error);\n            }\n        },\n\n        async getAssociationInfo() {\n            try {\n                const res = await this.$api.admin.getAssociationInfo();\n                this.infoForm = res.associationInfo;\n            } catch (error) {\n                this.$message({\n                    message: '获取协会信息失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        submit (formName) {\n            this.$refs[formName].validate(async (valid) => {\n                if(valid) {\n                    try {\n                        await this.$api.admin.modifyAssociationInfo(this.infoForm);\n                        this.$message({\n                            message: '修改成功',\n                            duration: 2000,\n                            type: 'success'\n                        });\n                    } catch (error) {\n                        this.$message({\n                            message: '修改失败',\n                            duration: 2000,\n                            type: 'error'\n                        });\n                        console.log(error);\n                    }\n                } else {\n                    console.log('修改协会信息表单验证失败');\n                    return false;\n                }\n            });\n        },\n\n        reset() {\n            this.getAssociationInfo();\n            this.$refs['infoForm'].clearValidate();\n        },\n    }\n};\n</script>\n\n<style>\n.handle-box {\n    margin-bottom: 20px;\n}\n\n.handle-select {\n    width: 120px;\n}\n\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n\n.mr10 {\n    margin-right: 10px;\n}\n\n.ne-avatar-uploader .el-upload {\n    width: 250px;\n    height: 160px;\n}\n.ne-avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    text-align: center;\n}\n.ne-avatar {\n    height: 100%;\n    display: block;\n}\n\n.title_and_action {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-bottom: 10px;\n}\n.title_wrap {\n    font-size: 20px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AssociationInformation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./AssociationInformation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AssociationInformation.vue?vue&type=template&id=fdbf0932&\"\nimport script from \"./AssociationInformation.vue?vue&type=script&lang=js&\"\nexport * from \"./AssociationInformation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AssociationInformation.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}