(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MemberManage"],{1790:function(e,t,r){},2988:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 会员管理\n            ")])],1)],1),r("div",{staticClass:"container"},[r("div",{staticClass:"handle-box"},[r("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"姓名/会员证编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.inputKey,callback:function(t){e.inputKey=t},expression:"inputKey"}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.handleRefresh}},[e._v("刷新")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),r("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.memberList,border:"","header-cell-class-name":"table-header"}},[r("el-table-column",{attrs:{prop:"memberUid",label:"会员证编号","min-width":"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberName",label:"会员姓名","min-width":"100",align:"center"}}),r("el-table-column",{attrs:{label:"头像(查看大图)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-image",{staticClass:"table-td-thumb",attrs:{src:e.row.memberPhoto,"preview-src-list":[e.row.memberPhoto]}})]}}])}),r("el-table-column",{attrs:{prop:"memberGender",label:"性别","min-width":"50",align:"center"}}),r("el-table-column",{attrs:{prop:"memberIdcard",label:"身份证号","min-width":"200",align:"center"}}),r("el-table-column",{attrs:{prop:"memberPhone",label:"电话号码","min-width":"120",align:"center"}}),r("el-table-column",{attrs:{prop:"memberWechat",label:"微信号",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberPseudonym",label:"笔名",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberBirthday",label:"生日",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberNation",label:"民族",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberParties",label:"党派",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberEducation",label:"学历",width:"100",align:"center"}}),r("el-table-column",{attrs:{prop:"memberNativePlace",label:"籍贯",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberWorkUnit",label:"工作单位",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberAddress",label:"通联地址",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberPostalCode",label:"邮政编码",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberAbility",label:"专长",width:"150",align:"center"}}),r("el-table-column",{attrs:{prop:"memberIntroduction",label:"会员自我介绍",width:"250",align:"center"}}),r("el-table-column",{attrs:{prop:"memberCreateTime",label:"入会时间",width:"160",align:"center",sortable:""}}),r("el-table-column",{attrs:{label:"操作",width:"180",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),r("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"pagination"},[r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total},on:{"current-change":e.handlePageChange,"prev-click":e.handlePagePrev,"next-click":e.handlePageNext}})],1)],1),r("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"40%","show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editVisible=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"会员姓名",prop:"memberName"}},[r("el-input",{model:{value:e.editForm.memberName,callback:function(t){e.$set(e.editForm,"memberName",t)},expression:"editForm.memberName"}})],1),r("el-form-item",{attrs:{label:"会员证编号",prop:"memberUid"}},[r("el-input",{model:{value:e.editForm.memberUid,callback:function(t){e.$set(e.editForm,"memberUid",t)},expression:"editForm.memberUid"}})],1),r("el-form-item",{attrs:{label:"性别",prop:"memberGender"}},[r("el-radio-group",{model:{value:e.editForm.memberGender,callback:function(t){e.$set(e.editForm,"memberGender",t)},expression:"editForm.memberGender"}},[r("el-radio",{attrs:{label:"男"}},[e._v("男")]),r("el-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),r("el-form-item",{attrs:{label:"电话",prop:"memberPhone"}},[r("el-input",{model:{value:e.editForm.memberPhone,callback:function(t){e.$set(e.editForm,"memberPhone",t)},expression:"editForm.memberPhone"}})],1),r("el-form-item",{attrs:{label:"微信号",prop:"memberWechat"}},[r("el-input",{model:{value:e.editForm.memberWechat,callback:function(t){e.$set(e.editForm,"memberWechat",t)},expression:"editForm.memberWechat"}})],1),r("el-form-item",{attrs:{label:"身份证号",prop:"memberIdcard"}},[r("el-input",{model:{value:e.editForm.memberIdcard,callback:function(t){e.$set(e.editForm,"memberIdcard",t)},expression:"editForm.memberIdcard"}})],1),r("el-form-item",{attrs:{label:"生日",prop:"memberBirthday"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.editForm.memberBirthday,callback:function(t){e.$set(e.editForm,"memberBirthday",t)},expression:"editForm.memberBirthday"}})],1),r("el-form-item",{attrs:{label:"入会时间",prop:"memberCreateTime"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:e.editForm.memberCreateTime,callback:function(t){e.$set(e.editForm,"memberCreateTime",t)},expression:"editForm.memberCreateTime"}})],1),r("el-form-item",{attrs:{label:"笔名",prop:"memberPseudonym"}},[r("el-input",{model:{value:e.editForm.memberPseudonym,callback:function(t){e.$set(e.editForm,"memberPseudonym",t)},expression:"editForm.memberPseudonym"}})],1),r("el-form-item",{attrs:{label:"民族",prop:"memberNation"}},[r("el-input",{model:{value:e.editForm.memberNation,callback:function(t){e.$set(e.editForm,"memberNation",t)},expression:"editForm.memberNation"}})],1),r("el-form-item",{attrs:{label:"党派",prop:"memberParties"}},[r("el-input",{model:{value:e.editForm.memberParties,callback:function(t){e.$set(e.editForm,"memberParties",t)},expression:"editForm.memberParties"}})],1),r("el-form-item",{attrs:{label:"学历",prop:"memberEducation"}},[r("el-input",{model:{value:e.editForm.memberEducation,callback:function(t){e.$set(e.editForm,"memberEducation",t)},expression:"editForm.memberEducation"}})],1),r("el-form-item",{attrs:{label:"籍贯",prop:"memberNativePlace"}},[r("el-input",{model:{value:e.editForm.memberNativePlace,callback:function(t){e.$set(e.editForm,"memberNativePlace",t)},expression:"editForm.memberNativePlace"}})],1),r("el-form-item",{attrs:{label:"专长",prop:"memberAbility"}},[r("el-input",{model:{value:e.editForm.memberAbility,callback:function(t){e.$set(e.editForm,"memberAbility",t)},expression:"editForm.memberAbility"}})],1),r("el-form-item",{attrs:{label:"工作单位",prop:"memberWorkUnit"}},[r("el-input",{model:{value:e.editForm.memberWorkUnit,callback:function(t){e.$set(e.editForm,"memberWorkUnit",t)},expression:"editForm.memberWorkUnit"}})],1),r("el-form-item",{attrs:{label:"联通地址",prop:"memberAddress"}},[r("el-input",{model:{value:e.editForm.memberAddress,callback:function(t){e.$set(e.editForm,"memberAddress",t)},expression:"editForm.memberAddress"}})],1),r("el-form-item",{attrs:{label:"邮政编码",prop:"memberPostalCode"}},[r("el-input",{model:{value:e.editForm.memberPostalCode,callback:function(t){e.$set(e.editForm,"memberPostalCode",t)},expression:"editForm.memberPostalCode"}})],1),r("el-form-item",{attrs:{label:"个人介绍",prop:"memberIntroduction"}},[r("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.editForm.memberIntroduction,callback:function(t){e.$set(e.editForm,"memberIntroduction",t)},expression:"editForm.memberIntroduction"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveEdit("editForm")}}},[e._v("确 定")])],1)],1)],1)},i=[],m=(r("96cf"),r("1da1")),l={name:"MemberManage",data:function(){var e=function(e,t,r){""===t?r(new Error("请输入会员电话")):/^1(?:3\d|4[4-9]|5[0-35-9]|6[67]|7[013-8]|8\d|9\d)\d{8}$/.test(t)?r():r(new Error("电话号码不规范"))},t=function(e,t,r){""===t?r(new Error("请输入会员身份证号")):/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)?r():r(new Error("身份证号不规范"))};return{inputKey:"",memberList:[],currentPage:1,pageSize:10,total:0,editIndex:-1,editForm:{},editVisible:!1,rules:{memberUid:[{required:!0,message:"请输入会员证编号",trigger:"blur"}],memberName:[{required:!0,message:"请输入会员姓名",trigger:"blur"}],memberPhone:[{required:!0,validator:e,trigger:"blur"}],memberGender:[{required:!0,message:"请选择会员性别",trigger:"blur"}],memberIdcard:[{required:!0,validator:t,trigger:"blur"}],memberBirthday:[{required:!0,message:"请选择生日",trigger:"blur"}],memberWechat:[{required:!0,message:"请输入会员微信号",trigger:"blur"}],memberPseudonym:[{required:!0,message:"请输入会员笔名",trigger:"blur"}],memberNation:[{required:!0,message:"请输入会员民族",trigger:"blur"}],memberParties:[{required:!0,message:"请输入会员党派",trigger:"blur"}],memberEducation:[{required:!0,message:"请输入会员学历",trigger:"blur"}],memberNativePlace:[{required:!0,message:"请输入会员籍贯",trigger:"blur"}],memberAbility:[{required:!0,message:"请输入会员专长",trigger:"blur"}],memberWorkUnit:[{required:!0,message:"请输入会员工作单位",trigger:"blur"}],memberAddress:[{required:!0,message:"请输入会员通联地址",trigger:"blur"}],memberPostalCode:[{required:!0,message:"请输入会员邮政编码",trigger:"blur"}],memberIntroduction:[{required:!0,message:"请输入会员个人介绍",trigger:"blur"}]}}},activated:function(){this.currentPage=1,this.inputKey="",this.getMemberList()},methods:{getMemberList:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={currentPage:this.currentPage,pageSize:this.pageSize,inputKey:this.inputKey},e.prev=1,e.next=4,this.$api.user.getMemberList(t);case 4:r=e.sent,this.memberList=r.memberList,this.total=r.total,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message({message:"获取会员列表失败",duration:2e3,type:"error"}),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),handleRefresh:function(){var e=this.$message("刷新中");this.currentPage=1,this.inputKey="",this.getMemberList(),e.close()},handleSearch:function(){this.currentPage=1,this.getMemberList()},handlePageChange:function(e){this.currentPage=e,this.getMemberList()},handlePagePrev:function(){this.currentPage--},handlePageNext:function(){this.currentPage++},handleEdit:function(e,t){this.editIndex=e,this.editVisible=!0,this.editForm=JSON.parse(JSON.stringify(t))},cancelEdit:function(){this.editVisible=!1,this.$message({message:"操作已取消",duration:1500,type:"info"}),this.$refs["editForm"].clearValidate()},saveEdit:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=15;break}return t.editVisible=!1,e.prev=2,e.next=5,t.$api.user.modifyMember(t.editForm);case 5:t.$message({message:"修改成功",duration:2e3,type:"success"}),t.$set(t.memberList,t.editIndex,t.editForm),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),t.$message({message:"修改失败",duration:2e3,type:"error"}),console.log(e.t0);case 13:e.next=17;break;case 15:return console.log("修改会员表单验证失败"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}())},handleDelete:function(e,t){var r=this;this.$confirm("该会员将永久删除，确定要继续吗？","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(m["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={memberId:t.memberId},e.prev=1,e.next=4,r.$api.user.deleteMember(a);case 4:r.$message({message:"删除成功",duration:2e3,type:"success"}),r.getMemberList(),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),r.$message({message:"删除失败",duration:2e3,type:"error"}),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).catch((function(){r.$message({message:"操作已取消",duration:1500,type:"info"})}))}}},n=l,o=(r("e4b5"),r("0c7c")),s=Object(o["a"])(n,a,i,!1,null,"acd46434",null);t["default"]=s.exports},e4b5:function(e,t,r){"use strict";r("1790")}}]);
//# sourceMappingURL=MemberManage.08804952.js.map