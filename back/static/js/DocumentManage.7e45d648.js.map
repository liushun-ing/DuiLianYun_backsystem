{"version":3,"sources":["webpack:///./src/components/page/document_about/DocumentManage.vue?0daf","webpack:///src/components/page/document_about/DocumentManage.vue","webpack:///./src/components/page/document_about/DocumentManage.vue?cbb6","webpack:///./src/components/page/document_about/DocumentManage.vue","webpack:///./src/components/page/document_about/DocumentManage.vue?d8e1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","nativeOn","$event","type","indexOf","_k","keyCode","key","handleSearch","model","value","callback","$$v","inputKey","expression","on","handleRefresh","handleAdd","ref","documentList","scopedSlots","_u","fn","scope","row","documentPicture","handleDownload","$index","handleEdit","handleDelete","currentPage","pageSize","total","handlePageChange","handlePagePrev","handlePageNext","editVisible","editForm","rules","$set","uploadPicture","beforeAvatarUpload","slot","cancelEdit","saveEdit","staticRenderFns","res","$message","console","log","data","url","whetherChange","$refs","upload","clearFiles","window","open","filePath","component"],"mappings":"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","file":"static/js/DocumentManage.7e45d648.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-lx-cascades\"}),_vm._v(\" 资料管理\\n            \")])],1)],1),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"handle-box\"},[_c('el-input',{staticClass:\"handle-input mr10\",attrs:{\"placeholder\":\"名称/简介关键字\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleSearch($event)}},model:{value:(_vm.inputKey),callback:function ($$v) {_vm.inputKey=$$v},expression:\"inputKey\"}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.handleRefresh}},[_vm._v(\"刷新\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleSearch}},[_vm._v(\"搜索\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新建\")])],1),_c('el-table',{ref:\"multipleTable\",staticClass:\"table\",attrs:{\"data\":_vm.documentList,\"border\":\"\",\"header-cell-class-name\":\"table-header\"}},[_c('el-table-column',{attrs:{\"prop\":\"documentName\",\"min-width\":\"200\",\"label\":\"资料名称\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"封面图(查看大图)\",\"min-width\":\"130\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticClass:\"table-td-thumb\",attrs:{\"src\":scope.row.documentPicture,\"preview-src-list\":[scope.row.documentPicture]}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"documentIntroduction\",\"min-width\":\"300\",\"label\":\"资料简介\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"documentCreateTime\",\"width\":\"160\",\"label\":\"入库时间\",\"align\":\"center\",\"sortable\":\"\"}}),_c('el-table-column',{attrs:{\"prop\":\"documentScore\",\"min-width\":\"100\",\"label\":\"评分\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\",\"align\":\"center\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticClass:\"green\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-download\"},on:{\"click\":function($event){return _vm.handleDownload(scope.$index, scope.row)}}},[_vm._v(\"查看/下载\")]),_c('el-button',{staticClass:\"blue\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"修改\")]),_c('el-button',{staticClass:\"red\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"total, prev, pager, next\",\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"total\":_vm.total},on:{\"current-change\":_vm.handlePageChange,\"prev-click\":_vm.handlePagePrev,\"next-click\":_vm.handlePageNext}})],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑\",\"visible\":_vm.editVisible,\"width\":\"30%\",\"show-close\":false,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"资料名称\",\"prop\":\"documentName\"}},[_c('el-input',{model:{value:(_vm.editForm.documentName),callback:function ($$v) {_vm.$set(_vm.editForm, \"documentName\", $$v)},expression:\"editForm.documentName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"资料简介\",\"prop\":\"documentIntroduction\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\"},model:{value:(_vm.editForm.documentIntroduction),callback:function ($$v) {_vm.$set(_vm.editForm, \"documentIntroduction\", $$v)},expression:\"editForm.documentIntroduction\"}})],1),_c('el-form-item',{attrs:{\"label\":\"资料封面图最优宽高3:4\",\"prop\":\"masterPhoto\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"do-avatar-uploader\",attrs:{\"action\":\"uploadUrl\",\"show-file-list\":false,\"limit\":1,\"http-request\":_vm.uploadPicture,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.editForm.documentPicture)?_c('el-image',{staticClass:\"do-avatar\",attrs:{\"src\":_vm.editForm.documentPicture,\"fit\":\"contain\"}}):_c('i',{staticClass:\"el-icon-plus do-avatar-uploader-icon\"})],1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancelEdit}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.saveEdit('editForm')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item>\n                    <i class=\"el-icon-lx-cascades\"></i> 资料管理\n                </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div class=\"handle-box\">\n                <el-input @keyup.enter.native=\"handleSearch\" v-model=\"inputKey\" placeholder=\"名称/简介关键字\" class=\"handle-input mr10\"></el-input>\n                <el-button type=\"primary\" icon=\"el-icon-refresh\" @click=\"handleRefresh\">刷新</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">搜索</el-button>\n                <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"handleAdd\">新建</el-button>\n            </div>\n            <el-table\n                :data=\"documentList\"\n                border\n                class=\"table\"\n                ref=\"multipleTable\"\n                header-cell-class-name=\"table-header\"\n            >\n                <el-table-column prop=\"documentName\" min-width=\"200\" label=\"资料名称\" align=\"center\"></el-table-column>\n                <el-table-column label=\"封面图(查看大图)\" min-width=\"130\" align=\"center\">\n                    <template slot-scope=\"scope\">\n                        <el-image\n                            class=\"table-td-thumb\"\n                            :src=\"scope.row.documentPicture\"\n                            :preview-src-list=\"[scope.row.documentPicture]\"\n                        ></el-image>\n                    </template>\n                </el-table-column>\n                <el-table-column prop=\"documentIntroduction\" min-width=\"300\" label=\"资料简介\" align=\"center\"></el-table-column>\n                <el-table-column prop=\"documentCreateTime\" width=\"160\" label=\"入库时间\" align=\"center\" sortable></el-table-column>\n                <el-table-column prop=\"documentScore\" min-width=\"100\" label=\"评分\" align=\"center\"></el-table-column>\n                <el-table-column label=\"操作\" width=\"200\" align=\"center\" fixed=\"right\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                            type=\"text\"\n                            icon=\"el-icon-download\"\n                            class=\"green\"\n                            @click=\"handleDownload(scope.$index, scope.row)\"\n                        >查看/下载</el-button>\n                        <el-button\n                            type=\"text\"\n                            icon=\"el-icon-edit\"\n                            class=\"blue\"\n                            @click=\"handleEdit(scope.$index, scope.row)\"\n                        >修改</el-button>\n                        <el-button\n                            type=\"text\"\n                            icon=\"el-icon-delete\"\n                            class=\"red\"\n                            @click=\"handleDelete(scope.$index, scope.row)\"\n                        >删除</el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n            <div class=\"pagination\">\n                <el-pagination\n                    background\n                    layout=\"total, prev, pager, next\"\n                    :current-page=\"currentPage\"\n                    :page-size=\"pageSize\"\n                    :total=\"total\"\n                    @current-change=\"handlePageChange\"\n                    @prev-click=\"handlePagePrev\"\n                    @next-click=\"handlePageNext\"\n                ></el-pagination>\n            </div>\n        </div>\n\n        <el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\" :show-close=\"false\" :close-on-click-modal=\"false\">\n            <el-form ref=\"editForm\" :model=\"editForm\" :rules=\"rules\" label-width=\"90px\">\n                <el-form-item label=\"资料名称\" prop=\"documentName\">\n                    <el-input v-model=\"editForm.documentName\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"资料简介\" prop=\"documentIntroduction\">\n                    <el-input type=\"textarea\" autosize v-model=\"editForm.documentIntroduction\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"资料封面图最优宽高3:4\" prop=\"masterPhoto\">\n                    <el-upload\n                        ref=\"upload\"\n                        class=\"do-avatar-uploader\"\n                        action=\"uploadUrl\"\n                        :show-file-list=\"false\"\n                        :limit=\"1\"\n                        :http-request=\"uploadPicture\"\n                        :before-upload=\"beforeAvatarUpload\">\n                        <el-image v-if=\"editForm.documentPicture\" :src=\"editForm.documentPicture\" fit=\"contain\" class=\"do-avatar\"></el-image>\n                        <i v-else class=\"el-icon-plus do-avatar-uploader-icon\"></i>\n                    </el-upload>\n                </el-form-item>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"cancelEdit\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"saveEdit('editForm')\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\nimport utils from '../../../utils/utils.js';\nexport default {\n    name: 'DocumentManage',\n    data() {\n        return {\n            inputKey: '',\n            documentList: [],\n\n            pageSize: 10,\n            currentPage: 1,\n            total: 0,\n\n            editForm: {},\n            editIndex: -1,\n            editVisible: false,\n\n            whetherChange: false,\n\n            rules: {\n                documentName:[\n                    {required: true, message: '请输入资料名', trigger: 'blur'}\n                ],\n                documentIntroduction:[\n                    {required: true, message: '请输入资料简介', trigger: 'blur'}\n                ],\n                documentPicture: [\n                    {required: true, message: '请选择图片', trigger: 'blur'}\n                ]\n            },\n        };\n    },\n    activated() {\n        this.inputKey = '';\n        this.currentPage = 1;\n        this.getDocumentList();\n    },\n    methods: {\n\n        async getDocumentList() {\n            let params = {\n                currentPage: this.currentPage,\n                pageSize: this.pageSize,\n                inputKey: this.inputKey\n            };\n            try {\n                const res = await this.$api.document.getDocumentList(params);\n                this.documentList = res.documentList;\n                this.total = res.total;\n            } catch (error) {\n                this.$message({\n                    message: '获取资料列表失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        //触发刷新\n        handleRefresh() {\n            let messageObject = this.$message('刷新中');\n            this.currentPage = 1;\n            this.inputKey = '';\n            this.getDocumentList();\n            messageObject.close();\n        },\n        // 触发搜索按钮\n        handleSearch() {\n            this.currentPage = 1;\n            this.getDocumentList();\n        },\n        // 分页导航\n        handlePageChange(val) {\n            this.currentPage = val;\n            this.getDocumentList();\n        },\n        handlePagePrev(){\n            this.currentPage--;\n        },\n        handlePageNext(){\n            this.currentPage++;\n        },\n\n        async deletePhoto(documentPicture) {\n            let params = {\n                url: documentPicture\n            }\n            try {\n                await this.$api.document.deletePicture(params);\n                console.log(\"新闻原有图片删除成功\");\n            } catch (error) {\n                console.log(\"新闻原有图片删除失败\");\n                console.log(error);\n            }\n        },\n\n        beforeAvatarUpload(file) {\n            const isJPG = (file.type === 'image/jpeg' || file.type === 'image/png');\n            if (!isJPG) {\n                this.$message.error('上传封面图片只能是 JPG或者PNG 格式!');\n            }\n            else{\n                this.$message({\n                    message: '上传中'\n                })\n            }\n            return isJPG;\n        },\n\n        async uploadPicture(file) {\n            try {\n                const data = await utils.uploadFile('/file-server/document/back/uploadPicture', file.file);\n                this.$set(this.editForm, 'documentPicture', data.url);\n                this.$message({\n                    message: '图片上传成功',\n                    duration: 2000,\n                    type: 'success'\n                });\n                this.whetherChange = true;\n                this.$refs.upload.clearFiles();\n            } catch (error) {\n                this.$refs.upload.clearFiles();\n                console.log(error);\n                this.$message({\n                    message: '图片上传失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n            }\n        },\n\n        handleDelete(index, row) {\n            this.$confirm('该资料将永久删除，确定要继续吗', '提示', {\n                type: 'warning'\n            }).then(async () => {\n                let params = {\n                    documentId: row.documentId\n                };\n                try {\n                    await this.$api.document.deleteDocument(params);\n                    this.$message({\n                        message: '删除资料成功',\n                        duration: 2000,\n                        type: 'success'\n                    });\n                    // 资料删除成功才删除配套文件和封面图\n                    params = {\n                        fileId: row.documentFileId\n                    }\n                    try {\n                        await this.$api.document.deleteFile(params);\n                        console.log('资料配套文件删除成功');\n                    } catch (error) {\n                        console.log('资料配套文件删除失败');\n                        console.log(error);\n                    }\n                    params = {\n                        url: row.documentPicture\n                    };\n                    try {\n                        await this.$api.document.deletePicture(params);\n                        console.log('资料图片删除成功');\n                    } catch (error) {\n                        console.log('资料图片删除失败');  \n                        console.log(error);                  \n                    }\n                    this.getDocumentList();\n                } catch (error) {\n                    this.$message({\n                        message: '删除资料失败',\n                        duration: 2000,\n                        type: 'error'\n                    });\n                    console.log(error);\n                }\n                this.getDocumentList();\n            }).catch(() => {\n                this.$message({\n                    message: '操作已取消',\n                    duration: 1500,\n                    type: 'info'\n                });\n            });\n\n        },\n\n        cancelEdit() {\n            this.editVisible = false;\n            this.$message({\n                message: '操作已取消',\n                duration: 1500,\n                type: 'info'\n            });\n            this.$refs['editForm'].clearValidate();\n        },\n\n        // 编辑操作\n        handleEdit(index, row) {\n            this.editIndex = index;\n            this.editForm = JSON.parse(JSON.stringify(row));\n            this.editVisible = true;\n        },\n        saveEdit (formName) {\n            this.$refs[formName].validate(async (valid) => {\n                if(valid) {\n                    let documentPicture = this.documentList[this.editIndex].documentPicture;\n                    this.editVisible = false;\n                    let params = {\n                        documentId: this.editForm.documentId,\n                        documentName: this.editForm.documentName,\n                        documentIntroduction: this.editForm.documentIntroduction\n                    };\n                    try {\n                        await this.$api.document.modifyDocument(params);\n                        this.$message({\n                            message: '修改资料成功',\n                            duration: 2000,\n                            type: 'success'\n                        });\n                        this.$set(this.documentList, this.editIndex, this.editForm);\n                        if(this.whetherChange) {\n                            this.deletePhoto(documentPicture);\n                        }\n                    } catch (error) {\n                        this.$message({\n                            message: '修改资料失败',\n                            duration: 2000,\n                            type: 'error'\n                        });\n                        console.log(error);\n                    }\n                } else {\n                    console.log('修改资料表单验证失败');\n                    return false;\n                }\n            });\n        },\n\n        async handleDownload(index, row) {\n            let params = {\n                fileId: row.documentFileId\n            };\n            try {\n                const res = await this.$api.document.getFile(params);\n                // 如果是文件地址，会自动下载\n                window.open(res.filePath);\n            } catch (error) {\n                this.$message({\n                    message: '获取相关文件失败',\n                    duration: 2000,\n                    type: 'error'\n                });\n                console.log(error);\n            }\n        },\n\n        handleAdd() {\n            this.$router.push({name: 'DocumentUpload'});\n        }\n    }\n};\n</script>\n\n<style>\n.handle-box {\n    margin-bottom: 20px;\n}\n\n.handle-select {\n    width: 120px;\n}\n\n.handle-input {\n    width: 300px;\n    display: inline-block;\n}\n.table {\n    width: 100%;\n    font-size: 14px;\n}\n.green {\n    color: green;\n}\n.red {\n    color: #ff0000;\n}\n.mr10 {\n    margin-right: 10px;\n}\n.table-td-thumb {\n    display: block;\n    margin: auto;\n    width: 40px;\n    height: 40px;\n}\n.do-avatar-uploader .el-upload{\n    width: 160px;\n    height: 200px;\n}\n.do-avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n}\n.do-avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 160px;\n    height: 200px;\n    line-height: 200px;\n    text-align: center;\n}\n.do-avatar {\n    height: 100%;\n    display: block;\n}\n</style>\n","import mod from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/@vue/cli-service/node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DocumentManage.vue?vue&type=template&id=8af612a6&\"\nimport script from \"./DocumentManage.vue?vue&type=script&lang=js&\"\nexport * from \"./DocumentManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DocumentManage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./DocumentManage.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}